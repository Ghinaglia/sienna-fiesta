<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ€ Segundo AÃ±ito de {{ event.baby_name }}</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Nunito:wght@400;600;700;800&family=Fredoka+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- Fondo de estrellas animadas -->
<div class="stars-bg" id="starsBg"></div>

<!-- Confeti container -->
<div id="confetti-container"></div>

<!-- Personaje izquierda -->
<div class="side-character left" id="charLeft">
    <img src="{{ url_for('static', filename='lulipanpin.png') }}" alt="Lulipanpin">
</div>

<!-- Personaje derecha -->
<div class="side-character right" id="charRight">
    <img src="{{ url_for('static', filename='lulipanpin3.png') }}" alt="Lulipanpin">
</div>

<!-- Arco superior dorado -->
<div class="stage-arch">
    <div class="arch-inner">
        <span class="arch-star">â­</span>
        <span class="arch-text">âœ¨ Una noche mÃ¡gica te espera âœ¨</span>
        <span class="arch-star">â­</span>
    </div>
    <!-- Cortinas -->
    <div class="curtain curtain-left"></div>
    <div class="curtain curtain-right"></div>
</div>

<!-- Tarjeta principal -->
<main class="invitation-card" id="card">

    <!-- Hero con foto de Lulipanpin -->
    <div class="hero-section">
        <div class="hero-glow"></div>
        <img
            src="{{ url_for('static', filename='lulipanpin2.png') }}"
            class="hero-img"
            alt="Lulipanpin"
        >
        <div class="hero-badge">ğŸ€ InvitaciÃ³n Especial ğŸ€</div>
    </div>

    <!-- Nombre de la bebÃ© -->
    <div class="name-section">
        <p class="pre-title">ğŸŒŸ Celebramos el segundo aÃ±ito de ğŸŒŸ</p>
        <h1 class="baby-name">{{ event.baby_name }}</h1>
        <h2 class="baby-lastname">{{ event.last_name }}</h2>
        <div class="age-badge">
            <span class="age-number">2</span>
            <span class="age-label">aÃ±itos</span>
        </div>
    </div>

    <!-- Mensaje de Lulipanpin -->
    <div class="luli-message">
        <div class="luli-quote-img">
            <img src="{{ url_for('static', filename='lulipanpin.png') }}" alt="Lulipanpin">
        </div>
        <div class="luli-quote-text">
            <p>Â¡Hola! Soy <strong>Lulipanpin</strong> y vengo a festejar con</p>
            <p>la princesa mÃ¡s especial del reino ğŸ‘‘</p>
            <p class="luli-sub">Â¡Ven a cantar, bailar y llenarla de magia! ğŸ¤âœ¨</p>
        </div>
    </div>

    <!-- Info del evento -->
    <div class="event-info-section">
        <h3 class="section-title">ğŸ“… Los detalles del gran dÃ­a</h3>
        <div class="event-grid">
            <div class="event-card">
                <div class="event-icon">ğŸ“…</div>
                <div class="event-label">Fecha</div>
                <div class="event-value">{{ event.date }}</div>
            </div>
            <div class="event-card">
                <div class="event-icon">â°</div>
                <div class="event-label">Hora</div>
                <div class="event-value">{{ event.time }}</div>
            </div>
            <div class="event-card wide">
                <div class="event-icon">ğŸ“</div>
                <div class="event-label">Lugar</div>
                <div class="event-value">{{ event.location_name }}</div>
                <div class="event-address">{{ event.address }}</div>
            </div>
        </div>
    </div>

    <!-- Cuenta regresiva -->
    <div class="countdown-section">
        <p class="countdown-label">ğŸ‰ Â¡El gran dÃ­a llega en!</p>
        <div id="countdown" class="countdown-boxes">
            <div class="time-box" id="days-box">
                <span class="time-num" id="days">--</span>
                <span class="time-label">dÃ­as</span>
            </div>
            <div class="time-sep">:</div>
            <div class="time-box" id="hours-box">
                <span class="time-num" id="hours">--</span>
                <span class="time-label">horas</span>
            </div>
            <div class="time-sep">:</div>
            <div class="time-box" id="mins-box">
                <span class="time-num" id="mins">--</span>
                <span class="time-label">minutos</span>
            </div>
            <div class="time-sep">:</div>
            <div class="time-box" id="secs-box">
                <span class="time-num" id="secs">--</span>
                <span class="time-label">segundos</span>
            </div>
        </div>
    </div>

    <!-- GalerÃ­a de Lulipanpin -->
    <div class="gallery-section">
        <h3 class="section-title">ğŸŒˆ Â¡Lulipanpin te espera!</h3>
        <div class="gallery-grid">
            <div class="gallery-item item-main">
                <img src="{{ url_for('static', filename='Contrataralulipampin.jpg') }}" alt="Lulipanpin en la fiesta" class="gallery-party">
                <div class="gallery-overlay">
                    <span>Â¡Besos mÃ¡gicos! ğŸ’‹ ğŸ‰</span>
                </div>
            </div>
            <div class="gallery-item item-side">
                <img src="{{ url_for('static', filename='lulipanpin3.png') }}" alt="Lulipanpin">
                <div class="gallery-overlay">
                    <span>Â¡AsÃ­ festejamos! ğŸ’‹</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Formulario RSVP -->
    <div class="rsvp-section">
        <h3 class="section-title">ğŸ’Œ Confirma tu asistencia</h3>
        <p class="rsvp-subtitle">Â¡Queremos saber que vendrÃ¡s a la magia! âœ¨</p>

        {% if confirmed %}
        <div class="confirmed-msg">
            <div class="confirmed-icon">ğŸ‰</div>
            <p>Â¡Gracias! Tu confirmaciÃ³n fue registrada.</p>
            <p>Â¡Nos vemos en la fiesta! ğŸ’–</p>
        </div>
        {% else %}
        <form class="rsvp-form" action="/" method="POST">
            <div class="form-group">
                <label>Tu nombre completo</label>
                <input type="text" name="name" placeholder="Ej: MarÃ­a GonzÃ¡lez" required>
            </div>
            <div class="form-group">
                <label>Â¿CuÃ¡ntos acompaÃ±antes traes?</label>
                <select name="companions">
                    <option value="0">Vengo solo/a</option>
                    <option value="1">+1 acompaÃ±ante</option>
                    <option value="2">+2 acompaÃ±antes</option>
                    <option value="3">+3 acompaÃ±antes</option>
                    <option value="4">+4 o mÃ¡s</option>
                </select>
            </div>
            <button type="submit" class="rsvp-btn">
                <span>ğŸ€ Â¡Confirmar Asistencia!</span>
            </button>
        </form>
        {% endif %}
    </div>

    <!-- BotÃ³n de mÃºsica -->
    <div class="music-section">
        <button class="music-btn" id="musicBtn" onclick="toggleMusic()">
            <span class="music-icon">ğŸµ</span>
            <span class="music-text">Activar MÃºsica MÃ¡gica</span>
        </button>
    </div>

    <!-- Footer -->
    <div class="footer-section">
        <p>Con todo el amor del mundo para <strong>{{ event.baby_name }}</strong> ğŸ’–</p>
        <div class="footer-hearts">ğŸ’— ğŸ’› ğŸ’— ğŸ’› ğŸ’—</div>
    </div>

</main>

<!-- Piso del escenario -->
<div class="stage-floor"></div>

<audio id="bg-music" loop>
    <source src="{{ url_for('static', filename='music.mp3') }}" type="audio/mpeg">
</audio>

<script>
// =====================
//  MÃšSICA
// =====================
let musicPlaying = false;
const music = document.getElementById("bg-music");

document.addEventListener("click", function() {
    if (!musicPlaying) {
        music.play().catch(() => {});
        musicPlaying = true;
        updateMusicBtn();
    }
}, { once: true });

function toggleMusic() {
    if (musicPlaying) {
        music.pause();
        musicPlaying = false;
    } else {
        music.play().catch(() => {});
        musicPlaying = true;
    }
    updateMusicBtn();
}

function updateMusicBtn() {
    const btn = document.getElementById("musicBtn");
    const icon = btn.querySelector(".music-icon");
    const text = btn.querySelector(".music-text");
    if (musicPlaying) {
        icon.textContent = "â¸";
        text.textContent = "Pausar MÃºsica";
        btn.classList.add("playing");
    } else {
        icon.textContent = "ğŸµ";
        text.textContent = "Activar MÃºsica MÃ¡gica";
        btn.classList.remove("playing");
    }
}

// =====================
//  CUENTA REGRESIVA
// =====================
function updateCountdown() {
    const eventDate = new Date("February 3, 2027 16:00:00").getTime();
    const now = new Date().getTime();
    const distance = eventDate - now;

    if (distance <= 0) {
        document.getElementById("countdown").innerHTML = "<p class='party-time'>ğŸ‰ Â¡HOY ES EL DÃA! ğŸ‰</p>";
        return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const mins = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const secs = Math.floor((distance % (1000 * 60)) / 1000);

    document.getElementById("days").textContent = String(days).padStart(2, '0');
    document.getElementById("hours").textContent = String(hours).padStart(2, '0');
    document.getElementById("mins").textContent = String(mins).padStart(2, '0');
    document.getElementById("secs").textContent = String(secs).padStart(2, '0');
}
setInterval(updateCountdown, 1000);
updateCountdown();

// =====================
//  CONFETI ğŸŠ
// =====================
const CONFETTI_COLORS = ["#ff69b4","#ffd700","#ff1493","#c084fc","#fb923c","#34d399","#60a5fa","#f472b6"];

function createConfetti() {
    const el = document.createElement("div");
    el.classList.add("confetti-piece");
    el.style.cssText = `
        left: ${Math.random() * 100}vw;
        background: ${CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)]};
        width: ${Math.random() * 10 + 6}px;
        height: ${Math.random() * 10 + 6}px;
        border-radius: ${Math.random() > 0.5 ? "50%" : "2px"};
        animation-duration: ${Math.random() * 3 + 2.5}s;
        animation-delay: ${Math.random() * 1}s;
        transform: rotate(${Math.random() * 360}deg);
    `;
    document.getElementById("confetti-container").appendChild(el);
    setTimeout(() => el.remove(), 5500);
}
// Menos confeti en mÃ³vil para ahorrar baterÃ­a
const isMobile = window.innerWidth < 600;
setInterval(createConfetti, isMobile ? 300 : 120);

// =====================
//  ESTRELLAS DE FONDO
// =====================
const starsContainer = document.getElementById("starsBg");
// Menos estrellas en mÃ³vil
const starCount = window.innerWidth < 600 ? 30 : 60;
for (let i = 0; i < starCount; i++) {
    const star = document.createElement("div");
    star.classList.add("bg-star");
    star.style.cssText = `
        left: ${Math.random() * 100}%;
        top: ${Math.random() * 100}%;
        width: ${Math.random() * 4 + 2}px;
        height: ${Math.random() * 4 + 2}px;
        animation-delay: ${Math.random() * 3}s;
        animation-duration: ${Math.random() * 2 + 2}s;
    `;
    starsContainer.appendChild(star);
}

// =====================
//  ENTRADA ANIMADA
// =====================
window.addEventListener("load", () => {
    setTimeout(() => {
        document.getElementById("card").classList.add("card-visible");
        document.getElementById("charLeft").classList.add("char-visible");
        document.getElementById("charRight").classList.add("char-visible");
    }, 300);
});
</script>
</body>
</html>